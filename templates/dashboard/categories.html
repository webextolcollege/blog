{% extends 'base.html' %}

{% block content %}

<main class="container-fluid mt-4" role="main">
  <div class="row">

    <!-- Sidebar -->
    <aside class="col-md-3" aria-label="Dashboard Sidebar">
      {% include 'dashboard/sidebar.html' %}
    </aside>

    <!-- Main Content -->
    <section class="col-md-9">

      <header class="d-flex justify-content-between align-items-center mb-3">
        <h1 class="h3 mb-0">All Categories</h1>

        <a 
          href="{% url 'add_category' %}" 
          class="btn btn-dark"
          aria-label="Add New Category"
        >
          Add New
        </a>
      </header>

      <div class="table-responsive">
        <table class="table table-hover align-middle">
          <caption class="visually-hidden">
            List of all blog categories with creation and update dates
          </caption>

          <thead class="table-light">
            <tr>
              <th scope="col">#</th>
              <th scope="col">Category Name</th>
              <th scope="col">Created At</th>
              <th scope="col">Updated At</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>

          <tbody>
            {% for cat in categories %}
              <tr>
                <th scope="row">{{ forloop.counter }}</th>
                <td>{{ cat.category }}</td>
                <td>{{ cat.created_at }}</td>
                <td>{{ cat.updated_at }}</td>
                <td>
                  {% if perms.auth.edit_category %}
                    <a 
                      href="{% url 'edit_category' cat.id %}" 
                      class="me-2 text-success"
                      aria-label="Edit category {{ cat.category }}"
                    >
                      <i class="fa fa-edit"></i>
                    </a>
                  {% endif %}

                  {% if perms.auth.delete_category %}
                    <a 
                      href="{% url 'delete_category' cat.id %}" 
                      class="text-danger"
                      aria-label="Delete category {{ cat.category }}"
                    >
                      <i class="fa fa-trash"></i>
                    </a>
                  {% endif %}
                </td>
              </tr>
            {% empty %}
              <tr>
                <td colspan="5" class="text-center text-muted">
                  No categories found.
                </td>
              </tr>
            {% endfor %}
          </tbody>

        </table>
      </div>

    </section>

  </div>
</main>

{% endblock %}
